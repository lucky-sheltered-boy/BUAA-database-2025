# 🚀 API 快速上手（3分钟）

## 第一步：登录获取 Token

### 1. 找到登录接口
在 Swagger UI 中，找到 **`POST /api/auth/login`**

### 2. 点击展开 → "Try it out"

### 3. 填写测试账号
```json
{
  "username": "2021001",
  "password": "123456"
}
```

### 4. 点击 "Execute"

### 5. 复制 Token
从响应中复制 `access_token` 的值：
```
eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyMDIxMDAx...
```

---

## 第二步：配置认证

### 1. 点击右上角 🔒 "Authorize" 按钮

### 2. 在弹出框中输入
```
Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```
⚠️ 注意：`Bearer ` 后面有空格

### 3. 点击 "Authorize" → "Close"

✅ 成功标志：🔒 变成 🔓

---

## 第三步：测试选课功能

### 查看可选课程
```
GET /api/students/16/available-courses
```
- student_id 填：`16`（张三的ID）
- 点击 "Execute"

### 选课
```
POST /api/students/16/enroll
```
- student_id 填：`16`
- Request body 填：
  ```json
  {
    "instance_id": 1
  }
  ```
- 点击 "Execute"

### 查看课表
```
GET /api/students/16/schedule
```
- student_id 填：`16`
- semester_id 填：`4`（或留空）
- 点击 "Execute"

---

## 📊 完整流程图

```
┌─────────────────────────────────────────┐
│  1. POST /api/auth/login                │
│     输入: 用户名 + 密码                    │
│     输出: access_token ✓                 │
└─────────────────┬───────────────────────┘
                  │
                  ▼
┌─────────────────────────────────────────┐
│  2. 点击 🔒 Authorize                    │
│     输入: Bearer <token>                 │
│     配置成功 ✓                            │
└─────────────────┬───────────────────────┘
                  │
                  ▼
┌─────────────────────────────────────────┐
│  3. GET /students/{id}/available-courses│
│     查看可以选的课程列表 ✓                  │
└─────────────────┬───────────────────────┘
                  │
                  ▼
┌─────────────────────────────────────────┐
│  4. POST /students/{id}/enroll          │
│     选择课程（填 instance_id）✓           │
└─────────────────┬───────────────────────┘
                  │
                  ▼
┌─────────────────────────────────────────┐
│  5. GET /students/{id}/schedule         │
│     查看个人课表 ✓                         │
└─────────────────────────────────────────┘
```

---

## 🎯 测试账号速查表

| 角色 | 用户名 | 密码 | 用户ID |
|------|--------|------|--------|
| 学生 | 2021001 | 123456 | 16 |
| 学生 | 2021002 | 123456 | 17 |
| 教师 | T001 | 123456 | 查看登录响应 |
| 教务 | A001 | 123456 | 查看登录响应 |

---

## 💡 关键点

### ✅ DO（推荐做法）
- ✅ 先登录，再配置 Authorize
- ✅ Token 格式：`Bearer <空格><token>`
- ✅ student_id 从登录响应的 `user_info.user_id` 获取
- ✅ 查看响应中的 `message` 了解错误原因

### ❌ DON'T（避免错误）
- ❌ 不要忘记 "Bearer " 前缀
- ❌ 不要使用错误的 student_id
- ❌ 不要在未登录时调用需要认证的接口
- ❌ Token 过期后要重新登录或刷新

---

## 🔍 响应状态码速查

| 状态码 | 含义 | 解决方法 |
|--------|------|----------|
| 200 | ✅ 成功 | 查看 data 字段获取结果 |
| 400 | ❌ 参数错误 | 检查请求参数格式 |
| 401 | ❌ 未登录 | 配置 Authorize |
| 422 | ❌ 业务错误 | 查看 message（如时间冲突） |
| 500 | ❌ 服务器错误 | 查看后端日志 |

---

## 🎓 实战练习

### 练习1：学生选课
1. 用 `2021001` 登录
2. 查看可选课程
3. 选择一门课（记住 instance_id）
4. 查看课表确认

### 练习2：教师查询
1. 用 `T001` 登录
2. 查看授课安排
3. 查看某门课的学生名单

### 练习3：选课冲突
1. 用 `2021001` 登录
2. 选择两门时间冲突的课
3. 观察第二次选课的错误提示

---

## 📚 更多信息

- 完整文档：[API使用指南.md](./API使用指南.md)
- 项目文档：[README.md](./README.md)
- 快速启动：[快速启动.md](./快速启动.md)

**现在开始体验吧！** 🎉
