# æ›´æ–°è¯´æ˜æ–‡æ¡£

## 2025-11-01 æ›´æ–°å†…å®¹

### ğŸ¯ ä¸»è¦æ”¹è¿›

#### 1. å­¦ç”Ÿè‡ªä¸»é€€è¯¾åŠŸèƒ½
**é—®é¢˜**: å­¦ç”Ÿé€€è¯¾æ—¶æç¤º"éœ€è¦å¼€è¯¾å®ä¾‹IDï¼Œè¯·è”ç³»ç®¡ç†å‘˜"ï¼Œæ— æ³•è‡ªä¸»é€€è¯¾ã€‚

**è§£å†³æ–¹æ¡ˆ**:
- âœ… ä¿®æ”¹æ•°æ®åº“å­˜å‚¨è¿‡ç¨‹ `sp_get_student_schedule`ï¼Œåœ¨è¿”å›ç»“æœä¸­æ·»åŠ  `å¼€è¯¾å®ä¾‹ID` å­—æ®µ
- âœ… ä¿®æ”¹åç«¯æ¨¡å‹ `StudentSchedule`ï¼Œæ·»åŠ  `instance_id` å­—æ®µ
- âœ… ä¿®æ”¹åç«¯API `/students/{student_id}/schedule`ï¼Œè¿”å› `instance_id`
- âœ… ä¿®æ”¹å‰ç«¯ `MySchedule.vue`ï¼Œä½¿ç”¨ `instance_id` è°ƒç”¨é€€è¯¾API

**å½±å“æ–‡ä»¶**:
- `database/03_procedures.sql` - æ›´æ–°å­˜å‚¨è¿‡ç¨‹ï¼ˆå·²åŒ…å«å¼€è¯¾å®ä¾‹IDï¼‰
- `backend/app/models/enrollment.py` - æ·»åŠ instance_idå­—æ®µ
- `backend/app/api/students.py` - è¿”å›instance_id
- `frontend/src/views/student/MySchedule.vue` - å®ç°é€€è¯¾é€»è¾‘

#### 2. ç®¡ç†å‘˜åŠŸèƒ½æ‰©å±•
**æ–°å¢åŠŸèƒ½**: æ•™åŠ¡ç®¡ç†å‘˜å¯ä»¥æ·»åŠ å­¦ç”Ÿã€æ•™å¸ˆã€è¯¾ç¨‹ã€‚

**å®ç°å†…å®¹**:
- âœ… æ–°å¢åç«¯æ¨¡å‹ `app/models/admin.py`
  - `AddUserRequest` - æ·»åŠ ç”¨æˆ·è¯·æ±‚
  - `AddCourseRequest` - æ·»åŠ è¯¾ç¨‹è¯·æ±‚
  - `AddDepartmentRequest` - æ·»åŠ é™¢ç³»è¯·æ±‚
- âœ… æ–°å¢åç«¯API `app/api/admin.py`
  - `POST /api/admin/users` - æ·»åŠ ç”¨æˆ·ï¼ˆå­¦ç”Ÿ/æ•™å¸ˆ/æ•™åŠ¡ï¼‰
  - `GET /api/admin/users` - æŸ¥è¯¢ç”¨æˆ·åˆ—è¡¨
  - `POST /api/admin/courses` - æ·»åŠ è¯¾ç¨‹
  - `GET /api/admin/courses` - æŸ¥è¯¢è¯¾ç¨‹åˆ—è¡¨
  - `POST /api/admin/departments` - æ·»åŠ é™¢ç³»
  - `GET /api/admin/departments` - æŸ¥è¯¢é™¢ç³»åˆ—è¡¨
- âœ… æ–°å¢å‰ç«¯é¡µé¢
  - `frontend/src/views/admin/UserManagement.vue` - ç”¨æˆ·ç®¡ç†
  - `frontend/src/views/admin/CourseManagement.vue` - è¯¾ç¨‹ç®¡ç†
- âœ… æ›´æ–°è·¯ç”±é…ç½® `frontend/src/router/index.js`
- âœ… æ›´æ–°æ•™åŠ¡å¸ƒå±€èœå• `frontend/src/views/admin/Layout.vue`

### ğŸ“ ä½¿ç”¨è¯´æ˜

#### æ›´æ–°æ•°æ®åº“
å¦‚æœå·²éƒ¨ç½²äº†æ—§ç‰ˆæ•°æ®åº“ï¼Œé‡æ–°æ‰§è¡Œ03è„šæœ¬å³å¯ï¼š

```sql
-- é‡æ–°æ‰§è¡Œå­˜å‚¨è¿‡ç¨‹è„šæœ¬ï¼ˆåŒ…å«æœ€æ–°çš„sp_get_student_scheduleï¼‰
SOURCE /path/to/database/03_procedures.sql;
```

#### é‡å¯åç«¯æœåŠ¡
```bash
cd backend
python app/main.py
```

#### é‡å¯å‰ç«¯æœåŠ¡
```bash
cd frontend
npm run dev
```

### âœ… æµ‹è¯•éªŒè¯

#### æµ‹è¯•1: å­¦ç”Ÿé€€è¯¾åŠŸèƒ½
1. ä»¥å­¦ç”Ÿèº«ä»½ç™»å½•ï¼ˆä¾‹å¦‚ï¼š2021001/123456ï¼‰
2. è¿›å…¥"æˆ‘çš„è¯¾è¡¨"
3. ç‚¹å‡»ä»»æ„è¯¾ç¨‹çš„"é€€è¯¾"æŒ‰é’®
4. ç¡®è®¤é€€è¯¾
5. éªŒè¯ï¼šè¯¾è¡¨ä¸­è¯¥è¯¾ç¨‹æ¶ˆå¤±ï¼Œé€€è¯¾æˆåŠŸæç¤º

#### æµ‹è¯•2: ç”¨æˆ·ç®¡ç†åŠŸèƒ½
1. ä»¥æ•™åŠ¡èº«ä»½ç™»å½•ï¼ˆä¾‹å¦‚ï¼šA001/123456ï¼‰
2. è¿›å…¥"ç”¨æˆ·ç®¡ç†"
3. ç‚¹å‡»"æ·»åŠ ç”¨æˆ·"
4. å¡«å†™ä¿¡æ¯ï¼š
   - å­¦å·/å·¥å·ï¼š2025001
   - å§“åï¼šæµ‹è¯•å­¦ç”Ÿ
   - å¯†ç ï¼š123456
   - è§’è‰²ï¼šå­¦ç”Ÿ
   - é™¢ç³»ï¼šè®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯å­¦é™¢
5. æäº¤å¹¶éªŒè¯ç”¨æˆ·åˆ—è¡¨ä¸­å‡ºç°æ–°ç”¨æˆ·

#### æµ‹è¯•3: è¯¾ç¨‹ç®¡ç†åŠŸèƒ½
1. ä»¥æ•™åŠ¡èº«ä»½ç™»å½•
2. è¿›å…¥"è¯¾ç¨‹ç®¡ç†"
3. ç‚¹å‡»"æ·»åŠ è¯¾ç¨‹"
4. å¡«å†™ä¿¡æ¯ï¼š
   - è¯¾ç¨‹IDï¼šCS999
   - è¯¾ç¨‹åç§°ï¼šè½¯ä»¶å·¥ç¨‹å®è·µ
   - å­¦åˆ†ï¼š3.0
   - å¼€è¯¾é™¢ç³»ï¼šè®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯å­¦é™¢
5. æäº¤å¹¶éªŒè¯è¯¾ç¨‹åˆ—è¡¨ä¸­å‡ºç°æ–°è¯¾ç¨‹

### ğŸ”§ æŠ€æœ¯ç»†èŠ‚

#### åç«¯APIè°ƒç”¨ç¤ºä¾‹

**æ·»åŠ å­¦ç”Ÿ**:
```bash
curl -X POST http://localhost:8000/api/admin/users \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer <token>" \
  -d '{
    "student_id": "2025001",
    "name": "æµ‹è¯•å­¦ç”Ÿ",
    "password": "123456",
    "role": "å­¦ç”Ÿ",
    "department_id": 1
  }'
```

**æ·»åŠ è¯¾ç¨‹**:
```bash
curl -X POST http://localhost:8000/api/admin/courses \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer <token>" \
  -d '{
    "course_id": "CS999",
    "course_name": "è½¯ä»¶å·¥ç¨‹å®è·µ",
    "credit": 3.0,
    "department_id": 1
  }'
```

**å­¦ç”Ÿé€€è¯¾**:
```bash
curl -X POST http://localhost:8000/api/students/16/drop \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer <token>" \
  -d '{
    "instance_id": 1
  }'
```

### ğŸ“Œ æ³¨æ„äº‹é¡¹

1. **æ•°æ®åº“æ›´æ–°**: ç¡®ä¿æ‰§è¡Œ `06_update_procedures.sql` æ›´æ–°å­˜å‚¨è¿‡ç¨‹
2. **åç«¯é‡å¯**: æ–°å¢APIéœ€è¦é‡å¯åç«¯æœåŠ¡æ‰èƒ½ç”Ÿæ•ˆ
3. **æƒé™æ§åˆ¶**: ç”¨æˆ·/è¯¾ç¨‹ç®¡ç†åŠŸèƒ½ä»…æ•™åŠ¡è§’è‰²å¯è®¿é—®
4. **æ•°æ®éªŒè¯**: æ‰€æœ‰è¾“å…¥éƒ½æœ‰æœåŠ¡ç«¯éªŒè¯ï¼Œç¡®ä¿æ•°æ®å®Œæ•´æ€§

### ğŸ› å·²çŸ¥é—®é¢˜

æ— 

### ğŸ“… ä¸‹ä¸€æ­¥è®¡åˆ’

- [ ] å¼€è¯¾å®ä¾‹ç®¡ç†ï¼ˆæ•™åŠ¡ç«¯ï¼‰
- [ ] æ•™å®¤ç®¡ç†ï¼ˆæ•™åŠ¡ç«¯ï¼‰
- [ ] å­¦æœŸç®¡ç†ï¼ˆæ•™åŠ¡ç«¯ï¼‰
- [ ] æ’è¯¾ç®¡ç†ï¼ˆæ•™åŠ¡ç«¯ï¼‰
- [ ] æ•°æ®å¯¼å…¥å¯¼å‡ºåŠŸèƒ½
- [ ] é€‰è¯¾æ—¶é—´çª—å£ç®¡ç†
